"use strict";(self["webpackChunkhugofast"]=self["webpackChunkhugofast"]||[]).push([[621],{27621:function(t,e,s){s.r(e),s.d(e,{default:function(){return c}});var o=function(){var t=this,e=t._self._c;return e("div",{staticClass:"login"},[e("div",{staticClass:"container"},[e("img",{attrs:{src:s(66949),alt:""}}),e("p",[t._v(" 未检测到您的登陆信息："),e("a-tag",{attrs:{color:"orange"},on:{click:t.showModal}},[t._v("查看：如何获取GitHub Token?")])],1),e("a-input",{attrs:{placeholder:"请输入Github Token，在setting中生成"},model:{value:t.HugoFastghpToken,callback:function(e){t.HugoFastghpToken=e},expression:"HugoFastghpToken"}}),e("a-input",{attrs:{placeholder:"请输入Github仓库名，如: lovezsh/hugo-test"},on:{blur:t.repoflie},model:{value:t.githubrepo,callback:function(e){t.githubrepo=e},expression:"githubrepo"}}),e("a-row",{attrs:{gutter:[24,8]}},[e("a-col",{attrs:{span:12}},[t.hide1?e("a-select",{staticStyle:{width:"100%"},attrs:{"show-search":"",placeholder:"选择目录","option-filter-prop":"children","filter-option":t.filterOption},on:{change:t.blogdir},model:{value:t.state,callback:function(e){t.state=e},expression:"state"}},t._l(t.restaurants,(function(s,o){return e("a-select-option",{key:o,attrs:{value:s.value}},[t._v(" "+t._s(s.value)+" ")])})),1):t._e()],1),e("a-col",{attrs:{span:12}},[t.hide11?e("a-select",{staticStyle:{width:"100%"},attrs:{"show-search":"",placeholder:"选择目录","option-filter-prop":"children1","filter-option":t.filterOption1},on:{change:t.blogdir1},model:{value:t.state1,callback:function(e){t.state1=e},expression:"state1"}},t._l(t.restaurants1,(function(s,o){return e("a-select-option",{key:o,attrs:{value:s.value}},[t._v(" "+t._s(s.value)+" ")])})),1):t._e()],1)],1),t.hide2?e("a-row",{attrs:{gutter:[24,8]}},[e("a-col",{attrs:{span:12}},[e("a-select",{staticStyle:{width:"100%"},attrs:{"show-search":"",placeholder:"无内容请留空！","option-filter-prop":"children2","filter-option":t.filterOption2},on:{change:t.blogdir2},model:{value:t.state2,callback:function(e){t.state2=e},expression:"state2"}},t._l(t.restaurants2,(function(s,o){return e("a-select-option",{key:o,attrs:{value:s.value}},[t._v(" "+t._s(s.value)+" ")])})),1)],1),e("a-col",{attrs:{span:12}},[e("a-button",{attrs:{type:"primary"},on:{click:t.setLogin}},[t._v("登陆")])],1)],1):t._e(),!0===t.showLoginErrorMessage?e("a-alert",{attrs:{message:t.loginErrorMessage,type:"warning",closable:""},on:{close:function(e){t.showLoginErrorMessage=!1}}}):t._e()],1),t._m(0),e("a-modal",{attrs:{title:"如何获取GitHub Token?",visible:t.visible,"confirm-loading":t.confirmLoading},on:{ok:t.handleOk,cancel:t.handleCancel}},[e("p",[t._v(" 使用文档："),e("a",{attrs:{href:"https://hugofast-docs.netlify.app/",target:"_blank"}},[t._v("https://hugofast-docs.netlify.app/")])]),e("p",[t._v(" 1. 前往 "),e("a",{attrs:{href:"https://github.com/settings/tokens/",target:"_blank"}},[t._v("https://github.com/settings/tokens/")])]),e("p",[t._v("2. 获取以下权限：repo / user")]),e("p",[t._v("3. 生成 token")])])],1)},r=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"fixed"},[e("a",{attrs:{href:"https://github.com/lovezsh/HugoFast",target:"_blank"}},[t._v("Github")]),t._v(" | "),e("a",{attrs:{href:"https://hugofast-docs.netlify.app/",target:"_blank"}},[t._v("使用文档")])])}],a=s(6154),i={name:"login",data(){return{HugoFastghpToken:"",githubrepo:"",restaurants:[],restaurants1:[],restaurants2:[],state:"",state1:"",state2:"",loginErrorMessage:"",showLoginErrorMessage:!1,hide1:!1,hide11:!1,hide2:!1,visible:!1,confirmLoading:!1}},methods:{showModal(){this.visible=!0},handleOk(t){this.visible=!1},handleCancel(t){this.visible=!1},setLogin(){if(!this.HugoFastghpToken)return this.$message.error("未填写正确的GitHub Token！"),!1;n(this.HugoFastghpToken).then((t=>{if(!this.githubrepo)return this.$message.error("未填写仓库名"),this.showLoginErrorMessage=!0,!1;t?(localStorage.setItem("HugoFastRepoName",this.githubrepo),localStorage.setItem("HugoFastghpToken",this.HugoFastghpToken),""!=this.state2?localStorage.setItem("bloglistdir",this.state+"/"+this.state1+"/"+this.state2):localStorage.setItem("bloglistdir",this.state+"/"+this.state1),this.showLoginErrorMessage=!1,this.$router.push("/")):(this.loginErrorMessage="GitHub Token 无效，请检查Token是否正确",this.showLoginErrorMessage=!0)}))},repoflie(){if(""==this.githubrepo)return this.loginErrorMessage="请填写仓库名",this.showLoginErrorMessage=!0,!1;a.Z.get("https://api.github.com/repos/"+this.githubrepo+"/contents").then((t=>{const e=t.data,s=e.filter((t=>"dir"===t.type)),o=s.map((t=>({value:t.name})));this.restaurants=o,this.hide1=!0,this.showLoginErrorMessage=!1})).catch((t=>{this.loginErrorMessage="仓库地址无效，请检查仓库地址",this.showLoginErrorMessage=!0,console.error(t)}))},blogdir(){this.hide11=!0,a.Z.get("https://api.github.com/repos/"+this.githubrepo+"/contents/"+this.state).then((t=>{const e=t.data,s=e.filter((t=>"dir"===t.type)),o=s.map((t=>({value:t.name})));this.restaurants1=o,this.hide1=!0,this.showLoginErrorMessage=!1})).catch((t=>{this.loginErrorMessage="仓库地址无效，请检查仓库地址",this.showLoginErrorMessage=!0,console.error(t)})),console.log(this.state)},blogdir1(){this.hide2=!0,a.Z.get("https://api.github.com/repos/"+this.githubrepo+"/contents/"+this.state+"/"+this.state1).then((t=>{const e=t.data,s=e.filter((t=>"dir"===t.type)),o=s.map((t=>({value:t.name})));this.restaurants2=o,this.hide1=!0,this.showLoginErrorMessage=!1})).catch((t=>{this.loginErrorMessage="仓库地址无效，请检查仓库地址",this.showLoginErrorMessage=!0,console.error(t)})),console.log(this.state1)},blogdir2(){a.Z.get("https://api.github.com/repos/"+this.githubrepo+"/contents/"+this.state+"/"+this.state1+"/"+this.state2).then((t=>{this.hide1=!0,this.showLoginErrorMessage=!1})).catch((t=>{this.loginErrorMessage="仓库地址无效，请检查仓库地址",this.showLoginErrorMessage=!0,console.error(t)}))},handleChange(t){console.log(`selected ${t}`)},handleBlur(){console.log("blur")},handleFocus(){console.log("focus")},filterOption(t,e){return e.componentOptions.children[0].text.toLowerCase().indexOf(t.toLowerCase())>=0},filterOption1(t,e){return e.componentOptions.children1[0].text.toLowerCase().indexOf(t.toLowerCase())>=0},filterOption2(t,e){return e.componentOptions.children2[0].text.toLowerCase().indexOf(t.toLowerCase())>=0}},mounted(){}};const n=t=>{const e={Authorization:`token ${t}`};return a.Z.get("https://api.github.com/user",{headers:e}).then((t=>!0)).catch((t=>!1))};var h=i,l=s(1001),g=(0,l.Z)(h,o,r,!1,null,null,null),c=g.exports},66949:function(t,e,s){t.exports=s.p+"img/logo.36209560.png"}}]);
//# sourceMappingURL=621.d55bafa0.js.map