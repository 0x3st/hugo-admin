{"version":3,"file":"js/551.1172cd29.js","mappings":"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","sources":["webpack://hugofast/./src/views/PublishView.vue?ca32","webpack://hugofast/src/views/PublishView.vue","webpack://hugofast/./src/views/PublishView.vue?97d9","webpack://hugofast/./src/views/PublishView.vue"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"layout\"},[_c('Aside'),_c('div',{staticClass:\"container edit\"},[_c('TopHeader'),_c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],staticClass:\"editwrap\"},[_c('a-row',[_c('a-col',{attrs:{\"span\":24}},[_vm._v(\"标题：\"),_c('a-input',{model:{value:(_vm.result2.title),callback:function ($$v) {_vm.$set(_vm.result2, \"title\", $$v)},expression:\"result2.title\"}})],1)],1),_c('a-row',{attrs:{\"gutter\":20}},[_c('a-col',{attrs:{\"span\":8}},[_vm._v(\"时间: \"),_c('a-input',{attrs:{\"placeholder\":\"格式如：2023-05-31\"},model:{value:(_vm.result3.date),callback:function ($$v) {_vm.$set(_vm.result3, \"date\", $$v)},expression:\"result3.date\"}})],1),_c('a-col',{attrs:{\"span\":8}},[_vm._v(\"分类: \"),_c('a-input',{attrs:{\"placeholder\":\"暂时只支持填写一个分类\"},model:{value:(_vm.result4.category),callback:function ($$v) {_vm.$set(_vm.result4, \"category\", $$v)},expression:\"result4.category\"}})],1),_c('a-col',{attrs:{\"span\":8}},[_vm._v(\"标签: \"),_c('a-input',{attrs:{\"placeholder\":\"暂时只支持填写一个标签\"},model:{value:(_vm.result5.tags),callback:function ($$v) {_vm.$set(_vm.result5, \"tags\", $$v)},expression:\"result5.tags\"}})],1)],1),_c('a-row',[_c('a-col',{attrs:{\"span\":24}},[[_c('a-textarea',{staticClass:\"content\",attrs:{\"auto-size\":\"\"},model:{value:(_vm.content),callback:function ($$v) {_vm.content=$$v},expression:\"content\"}})]],2)],1),_c('a-row',[_c('a-col',{attrs:{\"span\":24}},[_c('a-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.publishNews}},[_vm._v(\"发布新文章\")])],1)],1)],1)],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"layout\">\n    <Aside />\n    <div class=\"container edit\">\n      <TopHeader />\n      <div class=\"editwrap\" v-loading=\"loading\">\n        <a-row>\n          <a-col :span=\"24\">标题：<a-input v-model=\"result2.title\" /></a-col>\n        </a-row>\n        <a-row :gutter=\"20\">\n          <a-col :span=\"8\">时间: <a-input v-model=\"result3.date\" placeholder=\"格式如：2023-05-31\" /></a-col>\n          <a-col :span=\"8\">分类:\n            <a-input v-model=\"result4.category\" placeholder=\"暂时只支持填写一个分类\" />\n          </a-col>\n          <a-col :span=\"8\">标签:\n            <a-input v-model=\"result5.tags\" placeholder=\"暂时只支持填写一个标签\" />\n          </a-col>\n        </a-row>\n        <a-row>\n          <a-col :span=\"24\">\n            <template>\n              <a-textarea v-model=\"content\" class=\"content\" auto-size />\n            </template>\n          </a-col>\n        </a-row>\n\n        <a-row>\n          <a-col :span=\"24\">\n            <a-button type=\"primary\" @click=\"publishNews\">发布新文章</a-button>\n          </a-col>\n        </a-row>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport Aside from \"@/components/Aside.vue\";\nimport TopHeader from \"@/components/TopHeader.vue\";\n\nlet Base64 = require(\"js-base64\").Base64;\nimport axios from \"axios\";\nexport default {\n  name: \"PublishView\",\n  components: {\n    Aside,\n    TopHeader,\n  },\n  data() {\n    return {\n      bloglistdir: \"\",\n      loading: false,\n      HugoFastghpToken: \"\",\n      githubrepo: \"\",\n      detailsSha: \"\",\n      id: \"\",\n      text: \"\",\n      pattern1: /slug:\\s*(.*?)\\n/,\n      result1: { slug: \"\" },\n      pattern2: /title:\\s*(.*?)\\n/,\n      result2: { ttile: \"\" },\n      pattern3: /date:\\s*(.*?)\\n/,\n      result3: { date: \"\" },\n      pattern4: /categories:\\s*(.*?)\\n/,\n      result4: { category: \"\" },\n      pattern5: /tags:\\s*(.*?)\\n/,\n      result5: { tags: \"\" },\n\n      pattern: /^---\\n([\\s\\S]+?)\\n---/,\n      content: null,\n      currentDate: \"\",\n      base64Str: \"\",\n    };\n  },\n  methods: {\n    getDate() {\n      const date = new Date();\n      const year = date.getFullYear();\n      const month = date.getMonth() + 1;\n      const day = date.getDate();\n      this.currentDate = `${year}-${month}-${day}`;\n    },\n    autogetDate() {\n      const date = new Date();\n      const year = date.getFullYear();\n      const month = date.getMonth() + 1;\n      const day = date.getDate();\n      this.result3.date = `${year}-${month}-${day}`;\n    },\n\n    async publishNews() {\n      // 获取一次提交时间\n      const str =\n        `---\ntitle: ` + this.result2.title + `\ndate: ` + this.result3.date + `\ncategories:\n  - ` + this.result4.category + `\ntags:\n  - ` + this.result5.tags + `\n---\n\n` + this.content;\n\n      // 对字符串进行编码\n      this.base64Str = Base64.encode(str);\n\n      if (this.result2.title == \"\" || this.result2.title == undefined) {\n        this.$message.error('未填写标题');\n        return false;\n      }\n      if (this.result3.date == \"\" || this.result3.date == undefined) {\n        this.$message.error('未填写日期');\n        return false;\n      }\n      if (this.result4.category == \"\" || this.result4.category == undefined) {\n        this.$message.error('未填写分类');\n        return false;\n      }\n\n      if (this.content == \"\" || this.content == undefined) {\n        this.$message.error('请输入文章内容');\n        return false;\n      }\n\n      this.loading = true;\n      // 发布新文章\n      axios\n        .put(\n          \"https://api.github.com/repos/\" +\n          this.githubrepo +\n          \"/contents/\" +\n          this.bloglistdir +\n          \"/\" +\n          this.result3.date +\n          \"-\" +\n          this.result2.title +\n          \".md\",\n          {\n            message: \"提交于 \" + this.currentDate,\n            content: this.base64Str,\n          },\n          {\n            headers: {\n              Accept: \"application/vnd.github.v3+json\",\n              Authorization: \"token \" + this.HugoFastghpToken,\n            },\n          }\n        )\n        .then((response) => {\n          this.loading = false;\n          this.$message.success('发布成功');\n          localStorage.removeItem(\"HugoFastallData\");\n          this.$router.push(\"/list\");\n        })\n        .catch((error) => {\n          console.error(error);\n          this.loading = false;\n        });\n    },\n  },\n  computed: {},\n  mounted() {\n    this.HugoFastghpToken = localStorage.getItem(\"HugoFastghpToken\");\n    this.githubrepo = localStorage.getItem(\"HugoFastRepoName\");\n    this.bloglistdir = localStorage.getItem(\"bloglistdir\");\n\n    this.autogetDate();\n  },\n};\n</script>\n","import mod from \"-!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./PublishView.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./PublishView.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PublishView.vue?vue&type=template&id=07c5aea8&\"\nimport script from \"./PublishView.vue?vue&type=script&lang=js&\"\nexport * from \"./PublishView.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","staticClass","directives","name","rawName","value","expression","attrs","_v","model","result2","callback","$$v","$set","result3","result4","result5","content","on","publishNews","staticRenderFns","Base64","components","Aside","TopHeader","data","bloglistdir","loading","HugoFastghpToken","githubrepo","detailsSha","id","text","pattern1","result1","slug","pattern2","ttile","pattern3","date","pattern4","category","pattern5","tags","pattern","currentDate","base64Str","methods","getDate","Date","year","getFullYear","month","getMonth","day","autogetDate","async","str","title","encode","undefined","$message","error","axios","message","headers","Accept","Authorization","then","response","success","localStorage","removeItem","$router","push","catch","console","computed","mounted","getItem","component"],"sourceRoot":""}