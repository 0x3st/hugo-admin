{"version":3,"file":"js/365.7c466dd3.js","mappings":"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","sources":["webpack://hugofast/./src/views/Setting.vue?81ce","webpack://hugofast/src/views/Setting.vue","webpack://hugofast/./src/views/Setting.vue?976d","webpack://hugofast/./src/views/Setting.vue"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"layout\"},[_c('Aside'),_c('div',{staticClass:\"container setting\"},[_c('TopHeader'),_c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}]},[_c('div',{staticClass:\"item\"},[_c('label',[_vm._v(\"域名: \")]),_c('a-input',{attrs:{\"placeholder\":\"博客域名 https://\"},model:{value:(_vm.setting.domain),callback:function ($$v) {_vm.$set(_vm.setting, \"domain\", $$v)},expression:\"setting.domain\"}})],1),_c('div',{staticClass:\"item\"},[_c('label',[_vm._v(\"昵称: \")]),_c('a-input',{attrs:{\"placeholder\":\"仅在管理后台生效\"},model:{value:(_vm.setting.name),callback:function ($$v) {_vm.$set(_vm.setting, \"name\", $$v)},expression:\"setting.name\"}})],1),_c('div',{staticClass:\"item\"},[_c('a-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.saveSetting}},[_vm._v(\"保存设置\")])],1)])],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"layout\">\n    <Aside />\n    <div class=\"container setting\">\n      <TopHeader />\n      <div v-loading=\"loading\">\n        <div class=\"item\">\n          <label>域名: </label>\n          <a-input v-model=\"setting.domain\" placeholder=\"博客域名 https://\"></a-input>\n        </div>\n        <div class=\"item\">\n          <label>昵称: </label>\n          <a-input v-model=\"setting.name\" placeholder=\"仅在管理后台生效\"></a-input>\n        </div>\n        <div class=\"item\">\n          <a-button type=\"primary\" @click=\"saveSetting\">保存设置</a-button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport Aside from \"@/components/Aside.vue\";\nimport TopHeader from \"@/components/TopHeader.vue\";\n\nlet Base64 = require(\"js-base64\").Base64;\nimport axios from \"axios\";\nexport default {\n  name: \"setting\",\n  components: {\n    Aside,\n    TopHeader,\n  },\n  data() {\n    return {\n      loading: false,\n      HugoFastghpToken: \"\",\n      githubrepo: \"\",\n      base64Str: \"\",\n      settingBlo: false,\n      setting: {\n        domain: \"\",\n        name: \"\",\n      },\n      ConfigSha: '',\n    };\n  },\n  methods: {\n    getConfigSha() {\n      const HugoFastConfigSha = localStorage.getItem('HugoFastConfigSha');\n      if (HugoFastConfigSha) {\n        this.ConfigSha = HugoFastConfigSha;\n      } else {\n        axios\n          .get(\"https://api.github.com/repos/\" + this.githubrepo + \"/contents/HugoFast.config.js\")\n          .then((response) => {\n            this.ConfigSha = response.data.sha;\n            localStorage.setItem('HugoFastConfigSha', this.ConfigSha);\n          })\n          .catch((error) => { });\n      }\n\n    },\n    saveSetting() {\n      this.loading = true;\n\n      // 对字符串进行编码\n      const str = JSON.stringify(this.setting);\n      this.base64Str = Base64.encode(str);\n\n      if (this.settingBlo == false) {\n        // 没有HugoFast.config.js，新建一个\n        axios\n          .put(\n            \"https://api.github.com/repos/\" +\n            this.githubrepo +\n            \"/contents/HugoFast.config.js\",\n            {\n              message: \"更新 HugoFast.config.js 文件\",\n              content: this.base64Str,\n            },\n            {\n              headers: {\n                Accept: \"application/vnd.github.v3+json\",\n                Authorization: \"token \" + this.HugoFastghpToken,\n              },\n            }\n          )\n          .then((response) => {\n            console.log(response);\n            this.loading = false;\n            this.$message.success('保存成功');\n            localStorage.removeItem(\"HugoFastConfigSha\");\n            this.getConfigSha();\n          })\n          .catch((error) => {\n            console.error(error);\n            this.loading = false;\n            this.$message.error('保存失败，请稍后重新保存');\n          });\n      } else {\n        // 已有HugoFast.config.js进行修改\n        axios\n          .put(\n            \"https://api.github.com/repos/\" +\n            this.githubrepo +\n            \"/contents/HugoFast.config.js\",\n            {\n              message: \"提交于 \" + this.currentDate,\n              content: this.base64Str,\n              sha: this.ConfigSha,\n            },\n            {\n              headers: {\n                Accept: \"application/vnd.github.v3+json\",\n                Authorization: \"token \" + this.HugoFastghpToken,\n              },\n            }\n          )\n          .then((response) => {\n            this.loading = false;\n            this.$message.success('保存成功');\n            localStorage.removeItem(\"HugoFastConfigSha\");\n            this.getConfigSha();\n          })\n          .catch((error) => {\n            console.error(error);\n            this.loading = false;\n            this.$message.error('保存失败，请稍后重新保存');\n          });\n      }\n\n      localStorage.setItem(\"HugoFast_Setting\", JSON.stringify(this.setting));\n    },\n  },\n  computed: {},\n  mounted() {\n    this.HugoFastghpToken = localStorage.getItem(\"HugoFastghpToken\");\n    this.githubrepo = localStorage.getItem(\"HugoFastRepoName\");\n    const setting = JSON.parse(localStorage.getItem(\"HugoFast_Setting\"));\n    if (setting) {\n      this.settingBlo = true;\n      this.setting = JSON.parse(localStorage.getItem(\"HugoFast_Setting\"));\n    }\n    this.getConfigSha();\n  },\n};\n</script>\n","import mod from \"-!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Setting.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Setting.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Setting.vue?vue&type=template&id=5715827f&\"\nimport script from \"./Setting.vue?vue&type=script&lang=js&\"\nexport * from \"./Setting.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","staticClass","directives","name","rawName","value","expression","_v","attrs","model","setting","callback","$$v","$set","on","saveSetting","staticRenderFns","Base64","components","Aside","TopHeader","data","loading","HugoFastghpToken","githubrepo","base64Str","settingBlo","domain","ConfigSha","methods","getConfigSha","HugoFastConfigSha","localStorage","getItem","axios","then","response","sha","setItem","catch","error","str","JSON","stringify","encode","message","content","headers","Accept","Authorization","console","log","$message","success","removeItem","currentDate","computed","mounted","parse","component"],"sourceRoot":""}